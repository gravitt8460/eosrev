

cleos create account eosio distgrp1 EOS7ckzf4BMgxjgNSYV22rtTXga8R9Z4XWVhYp8TBgnBi2cErJ2hn EOS7ckzf4BMgxjgNSYV22rtTXga8R9Z4XWVhYp8TBgnBi2cErJ2hn
cleos create account eosio distgrp2 EOS7ckzf4BMgxjgNSYV22rtTXga8R9Z4XWVhYp8TBgnBi2cErJ2hn EOS7ckzf4BMgxjgNSYV22rtTXga8R9Z4XWVhYp8TBgnBi2cErJ2hn
cleos create account eosio distgrp3 EOS7ckzf4BMgxjgNSYV22rtTXga8R9Z4XWVhYp8TBgnBi2cErJ2hn EOS7ckzf4BMgxjgNSYV22rtTXga8R9Z4XWVhYp8TBgnBi2cErJ2hn

cleos create account eosio distacct1 EOS7ckzf4BMgxjgNSYV22rtTXga8R9Z4XWVhYp8TBgnBi2cErJ2hn EOS7ckzf4BMgxjgNSYV22rtTXga8R9Z4XWVhYp8TBgnBi2cErJ2hn
cleos create account eosio distacct2 EOS7ckzf4BMgxjgNSYV22rtTXga8R9Z4XWVhYp8TBgnBi2cErJ2hn EOS7ckzf4BMgxjgNSYV22rtTXga8R9Z4XWVhYp8TBgnBi2cErJ2hn
cleos create account eosio distacct3 EOS7ckzf4BMgxjgNSYV22rtTXga8R9Z4XWVhYp8TBgnBi2cErJ2hn EOS7ckzf4BMgxjgNSYV22rtTXga8R9Z4XWVhYp8TBgnBi2cErJ2hn
cleos create account eosio distacct1 EOS7ckzf4BMgxjgNSYV22rtTXga8R9Z4XWVhYp8TBgnBi2cErJ2hn EOS7ckzf4BMgxjgNSYV22rtTXga8R9Z4XWVhYp8TBgnBi2cErJ2hn
cleos create account eosio distacct2 EOS7ckzf4BMgxjgNSYV22rtTXga8R9Z4XWVhYp8TBgnBi2cErJ2hn EOS7ckzf4BMgxjgNSYV22rtTXga8R9Z4XWVhYp8TBgnBi2cErJ2hn
cleos create account eosio distacct3 EOS7ckzf4BMgxjgNSYV22rtTXga8R9Z4XWVhYp8TBgnBi2cErJ2hn EOS7ckzf4BMgxjgNSYV22rtTXga8R9Z4XWVhYp8TBgnBi2cErJ2hn

cleos create account eosio distacc11 EOS7ckzf4BMgxjgNSYV22rtTXga8R9Z4XWVhYp8TBgnBi2cErJ2hn EOS7ckzf4BMgxjgNSYV22rtTXga8R9Z4XWVhYp8TBgnBi2cErJ2hn
cleos create account eosio distacc12 EOS7ckzf4BMgxjgNSYV22rtTXga8R9Z4XWVhYp8TBgnBi2cErJ2hn EOS7ckzf4BMgxjgNSYV22rtTXga8R9Z4XWVhYp8TBgnBi2cErJ2hn
cleos create account eosio distacc13 EOS7ckzf4BMgxjgNSYV22rtTXga8R9Z4XWVhYp8TBgnBi2cErJ2hn EOS7ckzf4BMgxjgNSYV22rtTXga8R9Z4XWVhYp8TBgnBi2cErJ2hn

cleos create account eosio distacc21 EOS7ckzf4BMgxjgNSYV22rtTXga8R9Z4XWVhYp8TBgnBi2cErJ2hn EOS7ckzf4BMgxjgNSYV22rtTXga8R9Z4XWVhYp8TBgnBi2cErJ2hn
cleos create account eosio distacc22 EOS7ckzf4BMgxjgNSYV22rtTXga8R9Z4XWVhYp8TBgnBi2cErJ2hn EOS7ckzf4BMgxjgNSYV22rtTXga8R9Z4XWVhYp8TBgnBi2cErJ2hn
cleos create account eosio distacc23 EOS7ckzf4BMgxjgNSYV22rtTXga8R9Z4XWVhYp8TBgnBi2cErJ2hn EOS7ckzf4BMgxjgNSYV22rtTXga8R9Z4XWVhYp8TBgnBi2cErJ2hn

cleos create account eosio distacc31 EOS7ckzf4BMgxjgNSYV22rtTXga8R9Z4XWVhYp8TBgnBi2cErJ2hn EOS7ckzf4BMgxjgNSYV22rtTXga8R9Z4XWVhYp8TBgnBi2cErJ2hn
cleos create account eosio distacc32 EOS7ckzf4BMgxjgNSYV22rtTXga8R9Z4XWVhYp8TBgnBi2cErJ2hn EOS7ckzf4BMgxjgNSYV22rtTXga8R9Z4XWVhYp8TBgnBi2cErJ2hn
cleos create account eosio distacc33 EOS7ckzf4BMgxjgNSYV22rtTXga8R9Z4XWVhYp8TBgnBi2cErJ2hn EOS7ckzf4BMgxjgNSYV22rtTXga8R9Z4XWVhYp8TBgnBi2cErJ2hn

cleos create account eosio distacc41 EOS7ckzf4BMgxjgNSYV22rtTXga8R9Z4XWVhYp8TBgnBi2cErJ2hn EOS7ckzf4BMgxjgNSYV22rtTXga8R9Z4XWVhYp8TBgnBi2cErJ2hn
cleos create account eosio distacc42 EOS7ckzf4BMgxjgNSYV22rtTXga8R9Z4XWVhYp8TBgnBi2cErJ2hn EOS7ckzf4BMgxjgNSYV22rtTXga8R9Z4XWVhYp8TBgnBi2cErJ2hn
cleos create account eosio distacc43 EOS7ckzf4BMgxjgNSYV22rtTXga8R9Z4XWVhYp8TBgnBi2cErJ2hn EOS7ckzf4BMgxjgNSYV22rtTXga8R9Z4XWVhYp8TBgnBi2cErJ2hn

cleos create account eosio distgrp4 EOS7ckzf4BMgxjgNSYV22rtTXga8R9Z4XWVhYp8TBgnBi2cErJ2hn EOS7ckzf4BMgxjgNSYV22rtTXga8R9Z4XWVhYp8TBgnBi2cErJ2hn
cleos create account eosio default EOS7ckzf4BMgxjgNSYV22rtTXga8R9Z4XWVhYp8TBgnBi2cErJ2hn EOS7ckzf4BMgxjgNSYV22rtTXga8R9Z4XWVhYp8TBgnBi2cErJ2hn

# PRIMARY ACCOUNT TO RECEIVE DIST CODE AND HANDLE THE DISTRIBUTION
cleos create account eosio dist31 EOS7ckzf4BMgxjgNSYV22rtTXga8R9Z4XWVhYp8TBgnBi2cErJ2hn EOS7ckzf4BMgxjgNSYV22rtTXga8R9Z4XWVhYp8TBgnBi2cErJ2hn
cleos set contract dist31 /eosdev/merriment/dist

# SET APPROPRIATE AUTHORITIES
cleos push action eosio updateauth '{"account":"dist31","permission":"active","parent":"owner","auth":{"keys":[{"key":"EOS7ckzf4BMgxjgNSYV22rtTXga8R9Z4XWVhYp8TBgnBi2cErJ2hn", "weight":1}],"threshold":1,"accounts":[{"permission":{"actor":"dist31","permission":"eosio.code"},"weight":1}],"waits":[]}}' -p dist31
cleos push action eosio updateauth '{"account":"distgrp1","permission":"active","parent":"owner","auth":{"keys":[{"key":"EOS7ckzf4BMgxjgNSYV22rtTXga8R9Z4XWVhYp8TBgnBi2cErJ2hn", "weight":1}],"threshold":1,"accounts":[{"permission":{"actor":"dist31","permission":"eosio.code"},"weight":1}],"waits":[]}}' -p distgrp1
cleos push action eosio updateauth '{"account":"distgrp2","permission":"active","parent":"owner","auth":{"keys":[{"key":"EOS7ckzf4BMgxjgNSYV22rtTXga8R9Z4XWVhYp8TBgnBi2cErJ2hn", "weight":1}],"threshold":1,"accounts":[{"permission":{"actor":"dist31","permission":"eosio.code"},"weight":1}],"waits":[]}}' -p distgrp2
cleos push action eosio updateauth '{"account":"distgrp3","permission":"active","parent":"owner","auth":{"keys":[{"key":"EOS7ckzf4BMgxjgNSYV22rtTXga8R9Z4XWVhYp8TBgnBi2cErJ2hn", "weight":1}],"threshold":1,"accounts":[{"permission":{"actor":"dist31","permission":"eosio.code"},"weight":1}],"waits":[]}}' -p distgrp3
cleos push action eosio updateauth '{"account":"distgrp4","permission":"active","parent":"owner","auth":{"keys":[{"key":"EOS7ckzf4BMgxjgNSYV22rtTXga8R9Z4XWVhYp8TBgnBi2cErJ2hn", "weight":1}],"threshold":1,"accounts":[{"permission":{"actor":"dist31","permission":"eosio.code"},"weight":1}],"waits":[]}}' -p distgrp4

# CREATE THE TOKEN ACCOUNT AND VARIOUS TOKENS TO ENSURE IT CAN SUPPORT MULTI-TOKEN CONTRACTS
cleos create account eosio merrito12 EOS7ckzf4BMgxjgNSYV22rtTXga8R9Z4XWVhYp8TBgnBi2cErJ2hn EOS7ckzf4BMgxjgNSYV22rtTXga8R9Z4XWVhYp8TBgnBi2cErJ2hn
cleos set contract merrito12 /eosdev/merriment/eosio.token
cleos push action merrito12 create '["dist31", "100000000.0000 MRM"]' -p merrito12
cleos push action merrito12 create '["dist31", "100000000.0000 MRX"]' -p merrito12
cleos push action merrito12 create '["dist31", "100000000.0000 JKL"]' -p merrito12
cleos push action merrito12 create '["dist31", "100000000.0000 XYZ"]' -p merrito12
cleos push action merrito12 create '["dist31", "100000000.0000 IOP"]' -p merrito12

cleos push action merrito12 issue '["dist31", "100.0000 MRX"]' -p dist31
cleos push action merrito12 issue '["dist31", "1000.0000 JKL"]' -p dist31
cleos push action merrito12 issue '["dist31", "100.0000 XYZ"]' -p dist31
cleos push action merrito12 issue '["dist31", "1000.0000 MRM"]' -p dist31

# INIT THE DIST CONTRACT WITH THE TOKEN CONTRACT AND THE ASSET BEING USE FOR THIS DISTRIBUTION
# Note:  THE QUANTITY OF THE ASSET DOES NOT MATTER. IT SIMPLY USES THE SYMBOL FOR COMPARISON PURPOSES
# FUTURE IMPROVEMENT: ONLY REQUIRE THE SYMBOL NAME RATHER THAN THE ENTIRE ASSET OBJECT
cleos push action dist31 init '["merrito12", "1.0000 JKL"]' -p dist31
cleos push action dist31 addparent '["Parent 1","distgrp1",50]' -p dist31
cleos push action dist31 addparent '["Parent 2","distgrp2",30]' -p dist31
cleos push action dist31 addparent '["Parent 3","distgrp3",20]' -p dist31

cleos push action dist31 addchild '["distgrp1","distacct1",10]' -p dist31
cleos push action dist31 addchild '["distgrp1","distacct2",10]' -p dist31
cleos push action dist31 addchild '["distgrp1","distacct3",10]' -p dist31

cleos push action dist31 addchild '["distgrp2","distacct2",40]' -p dist31
cleos push action dist31 addchild '["distgrp2","distacct3",60]' -p dist31

cleos push action dist31 addchild '["distgrp1","distacc11",3]' -p dist31
cleos push action dist31 addchild '["distgrp1","distacc12",3]' -p dist31
cleos push action dist31 addchild '["distgrp1","distacc13",3]' -p dist31
cleos push action dist31 addchild '["distgrp1","distacc21",3]' -p dist31
cleos push action dist31 addchild '["distgrp1","distacc22",3]' -p dist31
cleos push action dist31 addchild '["distgrp1","distacc23",3]' -p dist31
cleos push action dist31 addchild '["distgrp1","distacc31",3]' -p dist31
cleos push action dist31 addchild '["distgrp1","distacc32",3]' -p dist31
cleos push action dist31 addchild '["distgrp1","distacc33",3]' -p dist31
cleos push action dist31 addchild '["distgrp1","distacc41",3]' -p dist31
cleos push action dist31 addchild '["distgrp1","distacc42",3]' -p dist31
cleos push action dist31 addchild '["distgrp1","distacc43",3]' -p dist31
cleos push action dist31 addchild '["distgrp4","distacc11",3]' -p dist31
cleos push action dist31 addchild '["distgrp4","distacc12",3]' -p dist31
cleos push action dist31 addchild '["distgrp4","distacc13",3]' -p dist31
cleos push action dist31 addchild '["distgrp4","distacc21",3]' -p dist31
cleos push action dist31 addchild '["distgrp4","distacc22",3]' -p dist31
cleos push action dist31 addchild '["distgrp4","distacc23",3]' -p dist31
cleos push action dist31 addchild '["distgrp4","distacc31",3]' -p dist31
cleos push action dist31 addchild '["distgrp4","distacc32",3]' -p dist31
cleos push action dist31 addchild '["distgrp4","distacc33",3]' -p dist31
cleos push action dist31 addchild '["distgrp4","distacc41",3]' -p dist31
cleos push action dist31 addchild '["distgrp4","distacc42",3]' -p dist31
cleos push action dist31 addchild '["distgrp4","distacc43",3]' -p dist31

# PERFORM ALL OF THE ABOVE TRANSFERS
cleos push action dist31 distribute '[]' -p dist31